Consider the maximum element a{mx} of the good array a of length k. Then we can notice that the array a looks like [a1≤a2≤⋯≤a{mx}≥⋯≥ak−1≥ak]. And this is pretty obvious that if the array doesn't have this structure, then it isn't good (you can see it yourself). So we need to find the longest such suffix. It's pretty easy doable with pointer: initially, the pointer pos is at the last element. Then, while pos>1 and a{pos−1}≥a{pos}, decrease pos by one. If we're done with the previous step, we do the same, but while pos>1 and a{pos−1}≤a{pos}. The answer is pos−1.